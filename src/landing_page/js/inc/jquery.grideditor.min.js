
jQuery.fn.extend({unwrapInner:function(a){return this.each(function(){var b=this,d=$(b).children(a);if(d.length===1){d.contents().appendTo(b);d.remove()}})}});function ColorPicker(a){a.colorpicker()}function init_switch(){}(function(b){var a;b.fn.gridEditor=function(e){var d=this;var c=d.data("grideditor");if(arguments[0]=="getHtml"){if(c){c.deinit();var f=d.html();return f}else{return d.html()}}d.each(function(k,w){w=b(w);if(w.children().length&&!w.find("div.row").length){var y=w.children();var v=b('<div class="row"><div class="col-md-12"/></div>').appendTo(w);v.find(".col-md-12").append(y)}var R=b.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",content_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:""},e);var n,J,X,L;var z=["col-md-","col-sm-","col-xs-"];var t=0;var K=12;o();N();function o(){n=w.addClass("ge-canvas");if(R.source_textarea){var aa=b(R.source_textarea);aa.addClass("ge-html-output");L=aa;if(aa.val()){d.html(aa.val())}}if(typeof L==="undefined"||!L.length){L=b('<textarea class="ge-html-output"/>').insertBefore(n)}J=b('<div class="ge-mainControls" />').insertBefore(L).wrap("<div class='container'></div>");var ae=b('<div class="ge-wrapper ge-top" />').appendTo(J);X=b('<div class="ge-addRowGroup btn-group" />').appendTo(ae);b.each(R.new_row_layouts,function(ag,aj){var ah=b('<a class="btn btn-xs btn-primary" />').attr("title","Add row "+aj.join("-")).on("click",function(){var ak=l().appendTo(n);aj.forEach(function(al){g(al).appendTo(ak)});ak=ak.wrap("<section class='ge-sect'>").wrap("<div class='container bs-container'></div>");N()}).appendTo(X);ah.append('<span class="glyphicon glyphicon-plus-sign"/>');var af=aj.join(" - ");var ai='<div class="row ge-row-icon">';aj.forEach(function(ak){ai+='<div class="column col-xs-'+ak+'"/>'});ai+="</div>";ah.append(ai)});var Z=b('<div class="dropdown pull-right ge-layout-mode"><button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown"><span>Desktop</span></button><ul class="dropdown-menu" role="menu"><li><a data-width="auto" title="Desktop"><span>Desktop</span></a></li><li><a title="Tablet"><span>Tablet</span></li><li><a title="Phone"><span>Phone</span></a></li></ul></div>').on("click","a",function(){var af=b(this);q(af.closest("li").index());var ag=Z.find("button");ag.find("span").remove();ag.append(af.find("span").clone())}).appendTo(ae);var ad=b('<div class="btn-group pull-right"/>').appendTo(ae);var ab=b('<button title="Edit Source Code" type="button" class="btn btn-xs btn-default gm-edit-mode"><span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-chevron-right"></span></button>').on("click",function(){if(ab.hasClass("active")){n.empty().html(L.val()).show();N();L.hide()}else{M();L.height(0.8*b(window).height()).val(n.html()).show();n.hide()}ab.toggleClass("active btn-danger")}).appendTo(ad);var Y=b('<button title="Preview" type="button" class="btn btn-xs btn-default gm-preview"><span class="glyphicon glyphicon-eye-open"></span></button>').on("click",function(){Y.toggleClass("active btn-danger");if(!Y.hasClass("active")){n.addClass("ge-editing");W(n,false);E(n,false)}else{n.removeClass("ge-editing");W(n,true);E(n,true)}}).appendTo(ad);var ac=b(window);ac.on("scroll",function(af){if(ac.scrollTop()>J.offset().top&&ac.scrollTop()<n.offset().top+n.height()){if(ae.hasClass("ge-top")){ae.css({left:ae.offset().left,width:ae.outerWidth(),}).removeClass("ge-top").addClass("ge-fixed")}}else{if(ae.hasClass("ge-fixed")){ae.css({left:"",width:""}).removeClass("ge-fixed").addClass("ge-top")}}});n.on("click",".ge-content",function(ag){var af=D(b(this).data("ge-content-type"));if(af){af.init(R,b(this))}})}function H(){M();N()}function N(){i(true);n.addClass("ge-editing");V();O();B();p();x();q(t)}function M(){n.removeClass("ge-editing");var Y=n.find(".ge-content").each(function(){var Z=b(this)});n.find(".ge-tools-drawer").remove()}function B(){n.find(".row").each(function(){var aa=b(this);if(aa.find("> .ge-tools-drawer").length){return}var Z=b('<div class="ge-tools-drawer" />').prependTo(aa);I(Z,"Move","ge-move","glyphicon-move");I(Z,"Settings","","glyphicon-cog",function(){a=aa;U()});R.row_tools.forEach(function(ab){I(Z,ab.title||"",ab.className||"",ab.iconClass||"glyphicon-wrench",ab.on)});I(Z,"Remove row","","glyphicon-trash",function(){aa.slideUp(function(){aa.remove()})});I(Z,"Add column","ge-add-column","glyphicon-plus-sign",function(){aa.append(g(3));N()});var Y=j(aa,R.row_classes).appendTo(Z)})}function W(Z,Y){if(Z!==undefined&&Z!==""&&Y!==undefined){if(Y===true){b("body").contents().find(".row.ge-row").each(function(){$bg_mode=b(this).attr("data-bg-mode");$bg_value=b(this).attr("data-bg-value");$row_mode=b(this).attr("data-row-mode");$content_mode=b(this).attr("data-content-mode");$style=b(this).data("style");if($style===undefined){$style=""}if($bg_mode==="color"&&$bg_value!==""){$style+="background-color:"+$bg_value+";-webkit-background-clip:content-box;background-clip:content-box;background-position:center center;background-repeat:no-repeat;"}if($bg_mode==="image"&&$bg_value!==""){$style+="background-image:url("+$bg_value+");";$style+="background-size:cover;-webkit-background-origin:content-box;background-origin:content-box;background-position:center center;background-repeat:no-repeat;"}if($row_mode=="full-row"){b(this).parent(".bs-container").parent(".ge-sect").attr("style",$style)}if($row_mode=="container"){b(this).parent(".bs-container").attr("style",$style)}})}else{b("body").contents().find(".row.ge-row").each(function(){b(this).parent(".bs-container").removeAttr("style");b(this).parent(".bs-container").parent(".ge-sect").removeAttr("style")})}}}function E(Z,Y){if(Z!==undefined&&Z!==""&&Y!==undefined){if(Y===true){b("body").children().find(".column[class^='col-']").each(function(){$bg_mode=b(this).attr("data-bg-mode");$bg_value=b(this).attr("data-bg-value");$row_mode=b(this).attr("data-row-mode");$content_mode=b(this).attr("data-content-mode");$style=b(this).attr("data-style");if($style===undefined){$style=""}if($bg_mode==="color"&&$bg_value!==""){$style+="background-color:"+$bg_value+";-webkit-background-clip:content-box;background-clip:content-box;background-position:center center;background-repeat:no-repeat;"}if($bg_mode==="image"&&$bg_value!==""){$style+="background-image:url("+$bg_value+");";$style+="background-size:cover;-webkit-background-origin:content-box;background-origin:content-box;background-position:center center;background-repeat:no-repeat;"}b(this).attr("style",$style);if($style!==undefined){$styleDataArray=$style.split(";");for(var aa=0;aa<$styleDataArray.length;aa++){$itemStyle=$styleDataArray[aa].split(":");if($itemStyle[0]!==undefined&&$itemStyle[1]!==undefined){if($itemStyle[0]==="padding-left"||$itemStyle[0]==="padding-right"){b(this).css($itemStyle[0],(parseInt($itemStyle[1].replace("px",""))+15)+"px")}else{b(this).css($itemStyle[0],$itemStyle[1])}}}}})}else{b("body").children().find(".column[class^='col-']").each(function(){b(this).removeAttr("style");b(this).children(".ge-content:first").removeAttr("style")})}}}function u(Y){Y.fancybox({width:900,height:600,type:"iframe",autoScale:false,onClosed:function(Z){createBoxBgToRow("bg-img:"+b("#bg_image_id").val(),a,true)},onComplete:function(){}})}function U(){b.ajax({url:"ajaxSettings.php",data:{},type:"post",async:false,success:function(ae){b("#BackgroundRowModal .modal-body").html(ae);b("#BackgroundRowModal").modal();b("#SaveBackgroundRow").click(function(){s();b("#BackgroundRowModal").modal("hide")});b(".switch-btn").bootstrapSwitch();b("#BackgroundFull").on("switchChange.bootstrapSwitch",function(ag,ah){if(ah===true){b("#rowContentMode").show()}else{b("#rowContentMode").hide();b("#ContentFullRow").bootstrapSwitch("state",false)}});b("#BackgroundType").on("switchChange.bootstrapSwitch",function(ag,ah){if(ah===true){b("#bg-color").show();b("#bg-image").hide();b("#bg_image_id").val("")}else{b("#bg-color").hide();b("#bg-image").show();u(b(".photoManagerBackground"))}});$oldMode=a.attr("data-row-mode");if($oldMode!==undefined&&$oldMode!==""){if($oldMode==="full-row"){b("#BackgroundFull").bootstrapSwitch("state",true);b("#rowContentMode").show();$content_mode=a.attr("data-content-mode");$without_cols_rows=a.attr("data-without-rows-cols");if($content_mode!==undefined&&$content_mode!==""){if($content_mode==="full"){b("#ContentFullRow").bootstrapSwitch("state",true)}else{b("#ContentFullRow").bootstrapSwitch("state",false)}b("#ContentFullRow").show()}}else{b("#BackgroundFull").bootstrapSwitch("state",false);b("#rowContentMode").hide()}}if(a.parent(".bs-container").length===0){b("#FullRowMode").hide();if(a.hasClass("ge-row")){b("#BackGroundTypeDiv").hide();b("#bg-color").hide();b("#bg-image").hide()}}$bg_mode=a.attr("data-bg-mode");$bg_value=a.attr("data-bg-value");if($bg_value===undefined){$bg_value=""}if($bg_mode==="image"){b("#BackgroundType").bootstrapSwitch("state",false);b("#bg_image_id").val($bg_value)}else{b("#BackgroundType").bootstrapSwitch("state",true);b("#BackgroundColor input").val($bg_value)}ColorPicker(b("#BackgroundColor"));P(b("#CustomeMinHeight"),a.attr("data-style"),"min-height");P(b("#CustomeMarginTop"),a.attr("data-style"),"margin-top");P(b("#CustomeMarginBottom"),a.attr("data-style"),"margin-bottom");P(b("#CustomeMarginRight"),a.attr("data-style"),"margin-left");P(b("#CustomeMarginLeft"),a.attr("data-style"),"margin-right");P(b("#CustomePaddingTop"),a.attr("data-style"),"padding-top");P(b("#CustomePaddingBottom"),a.attr("data-style"),"padding-bottom");P(b("#CustomePaddingRight"),a.attr("data-style"),"padding-right");P(b("#CustomePaddingLeft"),a.attr("data-style"),"padding-left");var ab=a.attr("data-id");if(ab!==undefined&&ab!=""){b("#IdSetting").val(ab)}else{b("#IdSetting").val("")}var Y=a.attr("data-class");var aa=[];if(Y!==undefined){aa=Y.split(" ")}var af=false;var Z=false;var ad=false;for(var ac in aa){switch(aa[ac]){case"hidden-md":case"hidden-lg":af=true;Y=Y.replace("hidden-md","");Y=Y.replace("hidden-lg","");break;case"hidden-sm":Z=true;Y=Y.replace("hidden-sm","");break;case"hidden-xs":ad=true;Y=Y.replace("hidden-xs","");break}}b("#BackgroundRowModal .modal-body #cssClassSetting").val(h(Y));b("#BackgroundRowModal .modal-body #desktop_hidden").bootstrapSwitch("state",af);b("#BackgroundRowModal .modal-body #tablet_hidden").bootstrapSwitch("state",Z);b("#BackgroundRowModal .modal-body #mobile_hidden").bootstrapSwitch("state",ad)}})}function h(Y){if(Y!==undefined){return Y.replace(/^\s+|\s+$/g,"")}return""}function C(ab,aa){if(ab.val()!==undefined&&ab.val()!==""){var Z="";var Y=ab.parent("div").children(".input-group-addon").text();if(Y!==undefined&&Y!==""){Z=Y}return aa+":"+ab.val()+Z+";"}return""}function P(ac,ab,aa){if(ab!==""&&ab!==undefined){var ad=ab.split(";");for(var Y=0;Y<ad.length;Y++){var Z=ad[Y].split(":");if(Z[0]===aa){ac.val(Z[1].replace("px",""));break}}}}function s(){if(b("#BackgroundFull").bootstrapSwitch("state")===true){a.attr("data-row-mode","full-row")}else{a.attr("data-row-mode","container")}if(b("#ContentFullRow").bootstrapSwitch("state")===true){a.attr("data-content-mode","full");a.parent(".bs-container").removeClass("container").addClass("container-fluid")}else{a.attr("data-content-mode","container");a.parent(".bs-container").removeClass("container-fluid").addClass("container")}if(b("#BackgroundType").bootstrapSwitch("state")===true){a.attr("data-bg-mode","color");a.attr("data-bg-value",b("#BackgroundColor input").val())}else{a.attr("data-bg-mode","image");a.attr("data-bg-value",b("#bg_image_id").val())}$styles="";$styles+=C(b("#CustomeMinHeight"),"min-height");$styles+=C(b("#CustomeMarginTop"),"margin-top");$styles+=C(b("#CustomeMarginBottom"),"margin-bottom");$styles+=C(b("#CustomeMarginLeft"),"margin-left");$styles+=C(b("#CustomeMarginRight"),"margin-right");$styles+=C(b("#CustomePaddingTop"),"padding-top");$styles+=C(b("#CustomePaddingBottom"),"padding-bottom");$styles+=C(b("#CustomePaddingRight"),"padding-right");$styles+=C(b("#CustomePaddingLeft"),"padding-left");if($styles!==""){a.attr("data-style",$styles)}var Z=b("#IdSetting").val();if(Z!==undefined&&Z!=""){a.attr("data-id",$dom_id)}else{a.removeAttr("data-id")}$classes="";$classes+=b("#cssClassSetting").val()+" ";var ab=b("#BackgroundRowModal .modal-body #desktop_hidden").bootstrapSwitch("state");var Y=b("#BackgroundRowModal .modal-body #tablet_hidden").bootstrapSwitch("state");var aa=b("#BackgroundRowModal .modal-body #mobile_hidden").bootstrapSwitch("state");if(ab===true){$classes+="hidden-md ";$classes+="hidden-lg "}if(Y===true){$classes+="hidden-sm "}if(aa===true){$classes+="hidden-xs "}$classes=$classes.replace(/\s+$/,"");if($classes!==""){a.attr("data-class",$classes)}}function p(){n.find(".column").each(function(){var Y=b(this);if(Y.find("> .ge-tools-drawer").length){return}var aa=b('<div class="ge-tools-drawer" />').prependTo(Y);I(aa,"Move","ge-move","glyphicon-move");I(aa,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","glyphicon-minus",function(af){var ae=R.valid_col_sizes;var ad=z[t];var ac=ae.indexOf(A(Y,ad));var ab=ae[r(ac-1,0,ae.length-1)];if(af.shiftKey){ab=ae[0]}S(Y,ad,Math.max(ab,1))});I(aa,"Make column wider\n(hold shift for max)","ge-increase-col-width","glyphicon-plus",function(ag){var af=R.valid_col_sizes;var ad=z[t];var ac=af.indexOf(A(Y,ad));var ae=r(ac+1,0,af.length-1);var ab=af[ae];if(ag.shiftKey){ab=af[af.length-1]}S(Y,ad,Math.min(ab,K))});I(aa,"Settings","","glyphicon-cog",function(){a=Y;U()});R.col_tools.forEach(function(ab){I(aa,ab.title||"",ab.className||"",ab.iconClass||"glyphicon-wrench",ab.on)});I(aa,"Remove col","","glyphicon-trash",function(){Y.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){Y.remove()})});I(aa,"Edit Content","ge-add-row","glyphicon-text-width",function(){a=Y;m()});I(aa,"Add row","ge-add-row","glyphicon-plus-sign",function(){var ab=l();Y.append(ab);ab.append(g(6)).append(g(6));N()});var Z=j(Y,R.col_classes).appendTo(aa)})}function m(){tinyMCE.activeEditor.setContent(a.children(".ge-content").html());b("#InsetTextModal").modal("show")}b("body").on("click","#InsertText",function(){var Y=tinyMCE.activeEditor.getContent();a.children(".ge-content").html(Y);b("#InsetTextModal").modal("hide")});function I(ab,ad,aa,Y,ac){var Z=b('<a title="'+ad+'" class="'+aa+'"><span class="glyphicon '+Y+'"></span></a>').appendTo(ab);if(typeof ac=="function"){Z.on("click",ac)}if(typeof ac=="object"){b.each(ac,function(ae,af){Z.on(ae,af)})}}function j(Y,Z){var ab=b('<div class="ge-details" />');b('<input class="ge-id" />').attr("placeholder","id").val(Y.attr("id")).attr("title","Set a unique identifier").appendTo(ab);var aa=b('<div class="btn-group" />').appendTo(ab);Z.forEach(function(ac){var ad=b('<a class="btn btn-xs btn-default" />').html(ac.label).attr("title",ac.title?ac.title:'Toggle "'+ac.label+'" styling').toggleClass("active btn-primary",Y.hasClass(ac.cssClass)).on("click",function(){ad.toggleClass("active btn-primary");Y.toggleClass(ac.cssClass,ad.hasClass("active"))}).appendTo(aa)});return ab}function V(){n.find('.ge-row>.column,.ge-row>div[class*="col-"]').each(function(){var Y=b(this);var aa=2;var ab=G(Y);if(ab.length){aa=ab[0].size}var Z=Y.attr("class");z.forEach(function(ac){if(Z.indexOf(ac)==-1){Y.addClass(ac+aa)}});Y.addClass("column")})}function A(Y,ab){var aa=G(Y);for(var Z=0;Z<aa.length;Z++){if(aa[Z].colClass==ab){return aa[Z].size}}if(aa.length){return aa[0].size}return null}function G(Z){var Y=[];z.forEach(function(ab){var aa=new RegExp(ab+"(\\d+)","i");if(aa.test(Z.attr("class"))){Y.push({colClass:ab,size:parseInt(aa.exec(Z.attr("class"))[1])})}});return Y}function S(Y,ab,Z){var aa=new RegExp("("+ab+"(\\d+))","i");var ac=aa.exec(Y.attr("class"));if(ac&&parseInt(ac[2])!==Z){Y.switchClass(ac[1],ab+Z,50)}else{Y.addClass(ab+Z)}}function x(){n.sortable({items:"> section.ge-sect",connectWith:".ge-canvas",handle:".bs-container > .row > .ge-tools-drawer .ge-move",start:Y,helper:"clone",});n.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:"> .ge-tools-drawer .ge-move",start:Y,helper:"clone",});n.find(".column").sortable({items:"> .row, > .ge-content",connectsWith:".column",handle:"> .ge-tools-drawer .ge-move",start:Y,helper:"clone",});function Y(aa,Z){Z.placeholder.css({height:Z.item.outerHeight()});Z.helper.hide()}}function F(){n.add(n.find(".column")).add(n.find(".row")).sortable("destroy")}function l(){return b('<div class="row ge-row" />')}function g(Y){$classes=z.map(function(Z){return Z+=Y}).join(" ");$classes=$classes.replace("col-xs-"+Y,"col-xs-12");return b("<div/>").addClass($classes).append(T().html(D(R.content_types[0]).initialContent))}function i(Y){if(R.custom_filter.length){b.each(R.custom_filter,function(Z,aa){if(typeof aa=="string"){aa=window[aa]}aa(n,Y)})}}function O(){n.find(".column").each(function(){var Y=b(this);var Z=b();Y.children().each(function(){var aa=b(this);if(aa.is(".row, .ge-tools-drawer, .ge-content")){Q(Z)}else{Z=Z.add(aa)}});Q(Z)})}function Q(Z){if(Z.length){var Y=T().insertAfter(Z.last());Z.appendTo(Y);Z=b()}}function T(){return b("<div/>").addClass("ge-content ge-content-type-"+R.content_types[0]).attr("data-ge-content-type",R.content_types[0])}function q(Z){t=Z;var Y=["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"];Y.forEach(function(aa,ab){n.toggleClass(aa,ab==Z)})}function D(Y){return""}function r(Z,aa,Y){return Math.min(Y,Math.max(aa,Z))}w.data("grideditor",{init:N,deinit:M,})});return d};b.fn.gridEditor.RTEs={}})(jQuery);(function(){$.fn.gridEditor.RTEs.summernote={init:function(b,c){if(!jQuery().summernote){console.error("Summernote not available! Make sure you loaded the Summernote js file.")}var a=this;c.each(function(){var d=$(this);if(!d.hasClass("active")){if(d.html()==a.initialContent){d.html("")}d.addClass("active");var f=$.extend((b.summernote&&b.summernote.config?b.summernote.config:{}),{tabsize:2,airMode:true,oninit:function(g){try{b.summernote.config.oninit(g)}catch(h){}$("#"+g.settings.id).focus()}});var e=d.summernote(f)}})},deinit:function(a,b){b.filter(".active").each(function(){var c=$(this);var d=c.summernote();if(d){d.summernote("destroy")}c.removeClass("active").attr("id",null).attr("style",null).attr("spellcheck",null)})},initialContent:"<p>Lorem ipsum dolores</p>",}})();(function(){$.fn.gridEditor.RTEs.tinymce={init:function(b,c){if(!window.tinymce){console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file.")}if(!c.tinymce){console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.")}var a=this;c.each(function(){var d=$(this);if(!d.hasClass("active")){if(d.html()==a.initialContent){d.html("")}d.addClass("active");var f=$.extend((b.tinymce&&b.tinymce.config?b.tinymce.config:{}),{inline:true,oninit:function(g){try{b.tinymce.config.oninit(g)}catch(h){}$("#"+g.settings.id).focus()}});var e=d.tinymce(f)}})},deinit:function(a,b){b.filter(".active").each(function(){var c=$(this);var d=c.tinymce();if(d){d.remove()}c.removeClass("active").attr("id",null).attr("style",null).attr("spellcheck",null)})},initialContent:"<p>Lorem ipsum dolores</p>",}})();